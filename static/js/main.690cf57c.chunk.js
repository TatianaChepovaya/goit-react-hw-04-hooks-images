(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{11:function(e,t,n){e.exports={item:"ImageGalleryItem_item__cTEu_",image:"ImageGalleryItem_image__106pu"}},12:function(e,t,n){e.exports={img:"NotFoundImage_img__1SuJN",title:"NotFoundImage_title__pu8ny"}},13:function(e,t,n){e.exports={overlay:"Modal_overlay__B_hoy",modal:"Modal_modal__3ldrs"}},24:function(e,t,n){e.exports={gallery:"ImageGallery_gallery__3njgd"}},26:function(e,t,n){e.exports={button:"Button_button__Nnf1p"}},32:function(e,t,n){},33:function(e,t,n){},7:function(e,t,n){e.exports={searchbar:"Searchbar_searchbar__K5uCt",form:"Searchbar_form__G0CjT",button:"Searchbar_button__19sJ6",label:"Searchbar_label__3xGYZ",input:"Searchbar_input__17_LK"}},74:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(5),o=n.n(r),i=(n(32),n(4)),s=n(6),u=(n(33),n(15),n(7)),l=n.n(u),b=n(1);var m=function(e){var t=e.onSubmit,n=Object(a.useState)(""),c=Object(i.a)(n,2),r=c[0],o=c[1];return Object(b.jsx)("header",{className:l.a.searchbar,children:Object(b.jsxs)("form",{className:l.a.form,onSubmit:function(e){e.preventDefault(),""!==r.trim()?(t(r),o("")):s.b.warn("Enter correct value")},children:[Object(b.jsx)("button",{type:"submit",className:l.a.button,children:Object(b.jsx)("span",{className:l.a.label,children:"Search"})}),Object(b.jsx)("input",{value:r,onChange:function(e){o(e.currentTarget.value)},className:l.a.input,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos"})]})})},j=n(14),d=(n(35),n(24)),h=n.n(d),f=n(25),g=n.n(f),O={fetchImagesWithQuery:function(e,t){return g.a.get("".concat("https://pixabay.com/api","/?q=").concat(e,"&page=").concat(t,"&key=").concat("22352284-07c51f530b6e71a5deb2eb1e0","&image_type=photo&orientation=horizontal&per_page=12")).then((function(e){if(200===e.status&&0!==e.data.length)return e.data.hits;if(404===e.status)throw new Error(e.message||"Your query is not find")}))}},p=n(11),_=n.n(p),x=function(e){var t=e.image,n=e.descr,a=e.onOpenModal,c=e.largeImg;return Object(b.jsx)("li",{className:_.a.item,onClick:a,children:Object(b.jsx)("img",{src:t,alt:n,className:_.a.image,source:c})})},v=n(26),y=n.n(v),S=function(e){var t=e.onClick;return Object(b.jsx)("button",{type:"button",className:y.a.button,onClick:t,children:"Load more"})},N=n(27),w=n.n(N),I=n(12),k=n.n(I),C=n.p+"static/media/hqdefault.c1d9e774.jpg",E=function(){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("img",{src:C,alt:"try to find smth",className:k.a.img}),Object(b.jsx)("h2",{className:k.a.title,children:" Try to find something else"})]})},F=n(13),L=n.n(F),T=document.querySelector("#modal-root");var G=function(e){var t=e.imageInfo,n=e.onClose;Object(a.useEffect)((function(){return window.addEventListener("keydown",c),function(){window.removeEventListener("keydown",c)}}));var c=function(e){"Escape"===e.code&&n()};return Object(r.createPortal)(Object(b.jsx)("div",{className:L.a.overlay,onClick:function(e){e.currentTarget===e.target&&n()},children:Object(b.jsx)("div",{className:L.a.modal,children:Object(b.jsx)("img",{src:t.largeImageURL,alt:t.tags})})}),T)},M="idle",q="pending",B="resolved",J="rejected";var Q=function(e){var t=e.searchValue,n=Object(a.useState)(null),c=Object(i.a)(n,2),r=c[0],o=c[1],u=Object(a.useState)(1),l=Object(i.a)(u,2),m=l[0],d=l[1],f=Object(a.useState)(null),g=Object(i.a)(f,2)[1],p=Object(a.useState)(M),_=Object(i.a)(p,2),v=_[0],y=_[1],N=Object(a.useState)(null),I=Object(i.a)(N,2),k=I[0],C=I[1];Object(a.useEffect)((function(){t&&(y(q),O.fetchImagesWithQuery(t,1).then((function(e){if(0===e.length)return s.b.error("Can't find ".concat(t,". Sorry(")),void y(J);o(e),y(B)})).catch((function(e){g(e.message),y(J)})),d(2))}),[t]);var F=function(e){C(e)};return"idle"===v?Object(b.jsx)("h1",{style:{color:"darkblue",textAlign:"center"},children:"Find your image!"}):"pending"===v?Object(b.jsx)(w.a,{type:"Puff",color:"#00BFFF",height:100,width:100,timeout:3e3}):"rejected"===v?Object(b.jsx)(E,{}):"resolved"===v?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("ul",{className:h.a.gallery,children:r.map((function(e){return Object(b.jsx)(x,{onOpenModal:function(){return F(e)},image:e.webformatURL,descr:e.tags},e.id)}))}),Object(b.jsx)(S,{onClick:function(){d(m+1),O.fetchImagesWithQuery(t,m).then((function(e){o((function(t){return[].concat(Object(j.a)(t),Object(j.a)(e))})),y(B),window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})})).catch((function(e){g(e.message),y(J)}))}}),k&&Object(b.jsx)(G,{onClose:F,imageInfo:k})]}):void 0};var W=function(){var e=Object(a.useState)(""),t=Object(i.a)(e,2),n=t[0],c=t[1];return Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)(m,{onSubmit:function(e){c(e)}}),Object(b.jsx)(Q,{searchValue:n}),Object(b.jsx)(s.a,{})]})};o.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(W,{})}),document.getElementById("root"))}},[[74,1,2]]]);
//# sourceMappingURL=main.690cf57c.chunk.js.map